<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†Ø´Ø¦ ØªØ·Ø¨ÙŠÙ‚Ø§Øª iOS</title>
    <style>
        :root {
            --primary-color: #007AFF;
            --secondary-color: #5856D6;
            --background-color: #F2F2F7;
            --card-color: #FFFFFF;
            --text-color: #1C1C1E;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
        }
        
        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .subtitle {
            color: #8E8E93;
            font-size: 1rem;
        }
        
        .card {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-color);
        }
        
        input, button, select {
            width: 100%;
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid #C7C7CC;
            font-size: 16px;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            background-color: #0056CC;
        }
        
        button.secondary {
            background-color: #8E8E93;
        }
        
        button.secondary:hover {
            background-color: #6D6D72;
        }
        
        .icon-preview {
            width: 80px;
            height: 80px;
            border-radius: 16px;
            background-color: #E5E5EA;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px auto;
            overflow: hidden;
        }
        
        .icon-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .icon-preview span {
            color: #8E8E93;
            font-size: 12px;
        }
        
        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }
        
        .file-input-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-input-button {
            background-color: #E5E5EA;
            color: var(--text-color);
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .result-section {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .success-icon {
            font-size: 60px;
            color: #34C759;
            margin-bottom: 20px;
        }
        
        .instructions {
            background-color: #E5F4FF;
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 20px;
            font-size: 14px;
            text-align: right;
        }
        
        .instructions ol {
            padding-right: 20px;
            margin-top: 10px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .back-button {
            display: none;
            margin-top: 20px;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            color: #8E8E93;
            font-size: 14px;
        }

        .feature-option {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #E5E5EA;
            border-radius: 8px;
            cursor: pointer;
        }

        .feature-option.selected {
            border-color: var(--primary-color);
            background-color: #E5F4FF;
        }
    </style>
</head>
<body>
    <header>
        <h1>Ù…Ù†Ø´Ø¦ ØªØ·Ø¨ÙŠÙ‚Ø§Øª iOS</h1>
        <p class="subtitle">Ø­ÙˆÙ„ Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ ÙˆÙŠØ¨ Ø¥Ù„Ù‰ ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„Ø£ÙŠÙÙˆÙ† Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</p>
    </header>
    
    <main>
        <section id="form-section" class="card">
            <form id="webapp-form">
                <div class="form-group">
                    <label for="site-name">Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</label>
                    <input type="text" id="site-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚" required>
                </div>
                
                <div class="form-group">
                    <label for="site-url">Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆÙ‚Ø¹</label>
                    <input type="url" id="site-url" placeholder="https://example.com" required>
                </div>
                
                <div class="form-group">
                    <label>Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</label>
                    <div class="icon-preview" id="icon-preview">
                        <span>Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©</span>
                    </div>
                    <div class="file-input-wrapper">
                        <div class="file-input-button">Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ø¬Ù‡Ø§Ø²</div>
                        <input type="file" id="icon-file" accept="image/*">
                    </div>
                </div>

                <div class="form-group">
                    <label>Ù…ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                    <div class="feature-option" onclick="toggleFeature(this)">
                        <input type="checkbox" id="home-button-feature" style="display: none;">
                        <strong>Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</strong>
                        <p style="font-size: 12px; color: #666; margin-top: 5px;">Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ù„Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</p>
                    </div>
                    <div class="feature-option" onclick="toggleFeature(this)">
                        <input type="checkbox" id="popup-handler" style="display: none;" checked>
                        <strong>Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©</strong>
                        <p style="font-size: 12px; color: #666; margin-top: 5px;">ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© Ø¥Ù„Ù‰ Ù†ÙˆØ§ÙØ° Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</p>
                    </div>
                </div>
                
                <button type="submit" id="generate-btn">Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„ØªØ«Ø¨ÙŠØª</button>
            </form>
        </section>
        
        <section id="result-section" class="card result-section">
            <div class="success-icon">âœ“</div>
            <h2>ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¨Ù†Ø¬Ø§Ø­!</h2>
            <p>Ø§Ù„Ø¢Ù† ÙŠÙ…ÙƒÙ†Ùƒ ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ</p>
            
            <div class="instructions">
                <p><strong>Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª:</strong></p>
                <ol>
                    <li>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± "ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„ØªØ«Ø¨ÙŠØª" Ø£Ø¯Ù†Ø§Ù‡</li>
                    <li>Ø§ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù…Ù„ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø² Ø§Ù„Ø£ÙŠÙÙˆÙ†</li>
                    <li>Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª &gt; Ø¹Ø§Ù… &gt; Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¬Ù‡Ø§Ø²/Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</li>
                    <li>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ Ø§Ù„Ø°ÙŠ ØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡</li>
                    <li>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "ØªØ«Ø¨ÙŠØª" ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰</li>
                    <li>Ù‚Ø¯ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¬Ù‡Ø§Ø²</li>
                    <li>Ø³ØªØ¸Ù‡Ø± Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</li>
                </ol>
            </div>
            
            <button id="download-btn">ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù Ø§Ù„ØªØ«Ø¨ÙŠØª</button>
            <button id="back-btn" class="secondary back-button">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </section>
    </main>
    
    <footer>
        <p>Ø¨Ø±Ù…Ø¬Ø© Ø­Ø³ÙŠÙ† Ø§Ù„Ø¹Ø±ÙŠØ§Ù†ÙŠ</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('webapp-form');
            const siteNameInput = document.getElementById('site-name');
            const siteUrlInput = document.getElementById('site-url');
            const iconFileInput = document.getElementById('icon-file');
            const iconPreview = document.getElementById('icon-preview');
            const generateBtn = document.getElementById('generate-btn');
            const downloadBtn = document.getElementById('download-btn');
            const backBtn = document.getElementById('back-btn');
            const formSection = document.getElementById('form-section');
            const resultSection = document.getElementById('result-section');
            
            let iconData = null;
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©
            iconFileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        iconData = e.target.result;
                        iconPreview.innerHTML = `<img src="${iconData}" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©">`;
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const siteName = siteNameInput.value;
                const siteUrl = siteUrlInput.value;
                const includeHomeButton = document.getElementById('home-button-feature').checked;
                const includePopupHandler = document.getElementById('popup-handler').checked;
                
                if (!siteName || !siteUrl) {
                    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©');
                    return;
                }
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„ØªØ«Ø¨ÙŠØª
                createInstallationProfile(siteName, siteUrl, iconData, includeHomeButton, includePopupHandler);
                
                // Ø¥Ø¸Ù‡Ø§Ø± Ù‚Ø³Ù… Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙˆØ¥Ø®ÙØ§Ø¡ Ù‚Ø³Ù… Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                formSection.style.display = 'none';
                resultSection.style.display = 'block';
                backBtn.style.display = 'block';
            });
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø©
            backBtn.addEventListener('click', function() {
                formSection.style.display = 'block';
                resultSection.style.display = 'none';
                backBtn.style.display = 'none';
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
                form.reset();
                iconPreview.innerHTML = '<span>Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø©</span>';
                iconData = null;
            });
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù ØªØ¹Ø±ÙŠÙ Ø§Ù„ØªØ«Ø¨ÙŠØª
            function createInstallationProfile(name, url, icon, homeButton, popupHandler) {
                // ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±ÙØ§Øª ÙØ±ÙŠØ¯Ø©
                const uuid1 = generateUUID();
                const uuid2 = generateUUID();
                const uuid3 = generateUUID();
                
                // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ base64 Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
                let iconBase64 = '';
                if (icon) {
                    // Ø¥Ø²Ø§Ù„Ø© Ø¨Ø§Ø¯Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ÙˆØ¬ÙˆØ¯Ø©
                    const base64Data = icon.split(',')[1];
                    iconBase64 = base64Data;
                }
                
                // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù Ø§Ù„Ù€ plist
                const plistContent = `<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>PayloadContent</key>
    <array>
        <dict>
            <key>FullScreen</key>
            <true/>
            <key>IgnoreManifestScope</key>
            <true/>
            <key>Icon</key>
            <data>${iconBase64}</data>
            <key>IsRemovable</key>
            <true/>
            <key>Label</key>
            <string>${name}</string>
            <key>PayloadDescription</key>
            <string>Ø§Ù„Ù…ÙˆÙ‚Ø¹</string>
            <key>PayloadDisplayName</key>
            <string>${name}</string>
            <key>PayloadIdentifier</key>
            <string>${uuid1}</string>
            <key>PayloadOrganization</key>
            <string>Me</string>
            <key>PayloadType</key>
            <string>com.apple.webClip.managed</string>
            <key>PayloadUUID</key>
            <string>${uuid2}</string>
            <key>PayloadVersion</key>
            <integer>1</integer>
            <key>Precomposed</key>
            <true/>
            <key>URL</key>
            <string>${url}</string>
        </dict>
    </array>
    <key>PayloadDescription</key>
    <string>Ø¨Ø±Ù…Ø¬Ø© Ø­Ø³ÙŠÙ† Ø§Ù„Ø¹Ø±ÙŠØ§Ù†ÙŠ</string>
    <key>PayloadDisplayName</key>
    <string>${name}</string>
    <key>PayloadIdentifier</key>
    <string>appicon.${name}</string>
    <key>PayloadRemovalDisallowed</key>
    <false/>
    <key>PayloadType</key>
    <string>Configuration</string>
    <key>PayloadUUID</key>
    <string>${uuid3}</string>
    <key>PayloadVersion</key>
    <integer>1</integer>
</dict>
</plist>`;
                
                // Ø¥Ø¹Ø¯Ø§Ø¯ Ø²Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„
                downloadBtn.onclick = function() {
                    const blob = new Blob([plistContent], { type: 'application/x-apple-aspen-config' });
                    const downloadUrl = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = downloadUrl;
                    a.download = `${name}.mobileconfig`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(downloadUrl);
                    
                    // Ø¥Ø°Ø§ ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©ØŒ Ø¹Ø±Ø¶ ÙƒÙˆØ¯ JavaScript
                    if (homeButton || popupHandler) {
                        setTimeout(function() {
                            showJavaScriptCode(name, url, homeButton, popupHandler);
                        }, 1000);
                    }
                };
            }
            
            // Ø¹Ø±Ø¶ ÙƒÙˆØ¯ JavaScript Ù„Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©
            function showJavaScriptCode(name, url, homeButton, popupHandler) {
                let jsCode = '';
                
                if (homeButton && popupHandler) {
                    jsCode = `
<!-- Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ Ù‚Ø¨Ù„ </body> -->
<script>
// Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© ÙˆÙ…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
if (window.navigator.standalone) {
    // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø©
    const homeBtn = document.createElement('button');
    homeBtn.innerHTML = 'ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©';
    homeBtn.style.cssText = 'position:fixed; top:15px; left:15px; z-index:9999; background:#007AFF; color:white; border:none; padding:10px 15px; border-radius:20px; font-size:14px; cursor:pointer;';
    homeBtn.onclick = () => window.location.href = '/';
    document.body.appendChild(homeBtn);
    
    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
    window.open = function(url) {
        const overlay = document.createElement('div');
        overlay.style.cssText = 'position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:10000;';
        
        const iframe = document.createElement('iframe');
        iframe.src = url;
        iframe.style.cssText = 'position:fixed; top:50px; left:20px; width:calc(100% - 40px); height:calc(100% - 100px); background:white; border-radius:15px;';
        
        const closeBtn = document.createElement('button');
        closeBtn.innerHTML = 'âœ• Ø¥ØºÙ„Ø§Ù‚';
        closeBtn.style.cssText = 'position:fixed; top:60px; right:30px; z-index:10001; background:#FF3B30; color:white; border:none; padding:8px 12px; border-radius:15px;';
        closeBtn.onclick = () => {
            document.body.removeChild(overlay);
            document.body.removeChild(closeBtn);
        };
        
        overlay.onclick = closeBtn.onclick;
        overlay.appendChild(iframe);
        document.body.appendChild(overlay);
        document.body.appendChild(closeBtn);
        
        return {
            close: () => closeBtn.onclick(),
            closed: false
        };
    };
}
<\/script>`;
                } else if (homeButton) {
                    jsCode = `
<!-- Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ Ù‚Ø¨Ù„ </body> -->
<script>
// Ø²Ø± Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
if (window.navigator.standalone) {
    const homeBtn = document.createElement('button');
    homeBtn.innerHTML = 'ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©';
    homeBtn.style.cssText = 'position:fixed; top:15px; left:15px; z-index:9999; background:#007AFF; color:white; border:none; padding:10px 15px; border-radius:20px; font-size:14px; cursor:pointer;';
    homeBtn.onclick = () => window.location.href = '/';
    document.body.appendChild(homeBtn);
}
<\/script>`;
                } else if (popupHandler) {
                    jsCode = `
<!-- Ø¶Ø¹ Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ Ù‚Ø¨Ù„ </body> -->
<script>
// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©
if (window.navigator.standalone) {
    window.open = function(url) {
        const overlay = document.createElement('div');
        overlay.style.cssText = 'position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:10000;';
        
        const iframe = document.createElement('iframe');
        iframe.src = url;
        iframe.style.cssText = 'position:fixed; top:50px; left:20px; width:calc(100% - 40px); height:calc(100% - 100px); background:white; border-radius:15px;';
        
        const closeBtn = document.createElement('button');
        closeBtn.innerHTML = 'âœ• Ø¥ØºÙ„Ø§Ù‚';
        closeBtn.style.cssText = 'position:fixed; top:60px; right:30px; z-index:10001; background:#FF3B30; color:white; border:none; padding:8px 12px; border-radius:15px;';
        closeBtn.onclick = () => {
            document.body.removeChild(overlay);
            document.body.removeChild(closeBtn);
        };
        
        overlay.onclick = closeBtn.onclick;
        overlay.appendChild(iframe);
        document.body.appendChild(overlay);
        document.body.appendChild(closeBtn);
        
        return {
            close: () => closeBtn.onclick(),
            closed: false
        };
    };
}
<\/script>`;
                }
                
                if (jsCode) {
                    alert('Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ©ØŒ ÙŠØ±Ø¬Ù‰ ÙˆØ¶Ø¹ ÙƒÙˆØ¯ JavaScript Ø§Ù„ØªØ§Ù„ÙŠ ÙÙŠ Ù…ÙˆÙ‚Ø¹Ùƒ Ù‚Ø¨Ù„ Ø¹Ù„Ø§Ù…Ø© \\</body>:\n\n' + jsCode);
                }
            }
            
            // Ø¯Ø§Ù„Ø© Ù„ØªÙˆÙ„ÙŠØ¯ UUID
            function generateUUID() {
                return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                    const r = Math.random() * 16 | 0;
                    const v = c == 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
            }
            
            // ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙŠØ²Ø§Øª
            window.toggleFeature = function(element) {
                const checkbox = element.querySelector('input[type="checkbox"]');
                checkbox.checked = !checkbox.checked;
                element.classList.toggle('selected', checkbox.checked);
            };
        });
    </script>
</body>
</html>
